<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Customizing a basemap and adding a kml layer</title>
    <style>
html, body, #viewDiv {
    padding:0; 
    margin: 0; 
    height:100%; 
    width:100%
}
    </style>
    <link rel="stylesheet" 
    href="https://js.arcgis.com/4.21/esri/css/main.css" />
    <script src="https://js.arcgis.com/4.21/"></script>
    <script>
        require([
            "esri/Map",
            "esri/views/MapView",
            "esri/layers/VectorTileLayer",
            "esri/config",
            "esri/layers/KMLLayer"

        ], function(Map, MapView, VectorTileLayer, esriConfig, KMLLayer)
                    {
    var myMap = new Map();

    var myView = new MapView({
        container: "viewDiv",
        map: myMap,
        center: [-88.9, 13.5],
        scale: 1600000
    });
    var myBasemap = new VectorTileLayer ({
        url: "https://arts-sciences.maps.arcgis.com/sharing/rest/content/items/7e6b142e5c2143edace5c4efc1d78b7e/resources/styles/root.json?f=pjson&token=t51iN2PynwzCIOSaq37A94jKffshqph-kCx_ngWAR8BlWGeU-9yw2l6qGHcureo-9Mj3kr0GTBgNwst-QXnoTszpImYiCd-dQDBUVwR5a9yBuV9D0HzOrbR159r3PDkrvfTNHS3JgWfMiua2n39UL90YKBwA-gnJ8Fx1zSHCKxbFDPTOzekMUoOT_F3lQTjf77g7KXvDd8U33IQwPq4_gZTUq8aufWmbcz0ukhTG7is."
    });
    myMap.add(myBasemap);
            var myMines = "https://www.dl.dropboxusercontent.com/s/jbhav02tf3gh4hu/minesES.kml?dl=0"

            esriConfig.request.corsEnabledServers.push(myMines);

            var mines = new KMLLayer({
                url:myMines,
            });
            myMap.add(mines);
                    });
    </script>
</head>
<body>
<div id= "viewDiv"></div>
</body>
</html>